---
import katex from 'katex';

interface Props {
  formula: string;
  display?: boolean;
}

const { formula, display = false } = Astro.props;

// Render formula server-side
let renderedFormula = '';
try {
  renderedFormula = katex.renderToString(formula, {
    throwOnError: false,
    displayMode: display,
    strict: false,
  });
} catch (e) {
  console.error('KaTeX rendering error:', e);
  renderedFormula = formula; // Fallback to plain text
}
---

<div class="formula-container" set:html={renderedFormula}></div>

<style>
  .formula-container {
    margin: var(--spacing-md) 0;
    padding: var(--spacing-sm);
    background-color: #f9f9f9;
    border-left: 3px solid var(--league-blue);
    border-radius: 3px;
    text-align: center;
  }
  
  .formula-placeholder {
    color: var(--league-gray);
  }
</style>
